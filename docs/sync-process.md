# Sync up

When addind a new node to the network, the node has to sync up the blockchain to generate the list of hashes and the pki. Otherwhise the node can't process new blocks that are generated by the consensus.

## Process

The whole connection process can be divided in separate processes

## Connect

- the node sends its identifier to the validator to build up the connection.
- the validator will send a challenge the node has to response for authorisation
- the validator sends his identifier name so both have the identifier from each other

## Sync up

the node sends a chunk request to receive the possible receiving blocks. Two parameters are passed:

- the current blockchain length (start)
- the chunk size (how many blocks should be sent)

e.g. `blocks/1/500`

the validator will send an array of the requested blocks with the defined maximum amount. If the node
has not enough blocks to fill it, an unfilled response will be send.

The node will parse all received blocks and repeat the procedure, in the second round with `block/501/1000`
until the validator returns an empty array. This means both chains are synced up and parsed by each node.
The event for new blocks is registered so new blocks will be parsed via the normal method.

## Network integration

The node will request a list of all other known validators to build up a connection to all validators taking
part in the consensus. The connection is equal to the connect method above. Listeners for new blocks will be
activated.

# Open Questions

- Should the validator nodes be passed at the beginning to have a backup or after the sync process for a clean
  separation?

# TODOS

- add sequence diagram showing the process above.
