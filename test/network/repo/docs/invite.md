# Invite system
Adding a new member to layer two and three are realised by invitation tokens that act like a secret. A member from a 
layer above (validator for layer one and gateway for layer two) generate a secret.

An invitation token can be generated by calling the http endpoint:
```shell script
curl -X POST "https://api.validator1.example.com/invite" \
-H "accept: */*" -H "Authorization: Bearer ${NODE_TOKEN}" -H "Content-Type: application/json" \
-d "{\"identifier\":\"${IDENTIFIER}\",\"secret\":\"${SECRET}\",\"readOnly\":false,\"force\":false}"
```
The endpoint is protected by the node secret so only the admin of a node can create or delete invite tokens from his node.
The body has to be json formatted.
- identifier: identifier of the new member. This identifier should not contain personal information to avoid conflicts with the GDPR.
- secret: it's possible to define a secret that is stored in the invitation object. If nothing is passed the node will generate one.
- readOnly: if set true the invitation code can only be used to create a observer certificate that can connect with the blockchain, but not send transactions to the validators.
- force: normally it's not possible to create an invitation for an identifier that is already registered on the blockchain. If set to true this rule will be ignored.

## Re-Invite a user

A member from the second or third layer can lose access to the private key that is connected with his identity.
To get access back a member from the next layer can generate an invitation token for the identifier an `force` it. This will
allow the member to sign a new keypair and bind it to the existing identifier. The old key will be revoked automatically
when the the key got registered on the blockchain. It cannot be used for new signatures but all old signature will be
valid until they are revoked by the new keypair.
